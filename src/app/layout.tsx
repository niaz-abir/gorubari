"use client";

import { Exo } from "next/font/google";
import "./globals.css";
import Navbar from "@/components/Navbar";
import { useEffect, useState } from "react";
import { MdDarkMode, MdLightMode } from "react-icons/md";

const exo = Exo({ subsets: ["latin"], weight: ["400", "700"] });

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const [isDarkMode, setIsDarkMode] = useState(true);

  // Load theme from localStorage
  useEffect(() => {
    const storedTheme = localStorage.getItem("theme");
    if (storedTheme) {
      setIsDarkMode(storedTheme === "dark");
    }
  }, []);

  // Toggle theme and save to localStorage
  const toggleTheme = () => {
    const newTheme = !isDarkMode;
    setIsDarkMode(newTheme);
    localStorage.setItem("theme", newTheme ? "dark" : "light");
  };

  return (
    <html lang="en" className={isDarkMode ? "dark" : ""}>
      <head>
        <link rel="icon" href="/favicon.ico" />
        <title>gorubari</title>
        <meta name="description" content="Generated by create next app" />
      </head>
      <body
        className={`${exo.className} transition-all duration-300 ${
          isDarkMode
            ? "bg-gradient-to-t from-[#000105] via-[#561F37] to-[#000b0f] text-white"
            : "bg-gradient-to-t from-[#9599a7] via-[#C3B59F] to-[#BABFD1] text-black"
        }`}
      >
        <div className="relative">
          {/* Navbar */}
          <Navbar toggleTheme={toggleTheme} isDarkMode={isDarkMode} />

          {/* Theme Toggle Button */}
          <button
            onClick={toggleTheme}
            className="fixed bottom-5 right-5 p-3 rounded-full shadow-lg transition-all duration-300 
            bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white hover:scale-105"
          >
            {isDarkMode ? <MdLightMode size={24} /> : <MdDarkMode size={24} />}
          </button>

          {children}
        </div>
      </body>
    </html>
  );
}
